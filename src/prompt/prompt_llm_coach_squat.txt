PROMPT PER LLM — CONFRONTO DI DUE SQUAT

Ruolo: Agisci come personal trainer. Stai confrontando l’esecuzione di uno squat “candidato” con un “benchmark/GT”.

Contesto (come leggere i dati)
	•	Riceverai due oggetti JSON nel formato rep_assessment.
	•	rep_assessment contiene:
	•	mode: come è stato ottenuto il pacchetto (es. "gt" per benchmark; "reps" per elenco ripetizioni; "last" per l’ultima rep).
	•	payload.reps_count: quante ripetizioni sono state aggregate.
	•	payload.template con tre blocchi:
	1.	checkpoints → valori a 5 istanti canonici di una ripetizione, su asse temporale normalizzato τ∈[0,1]:
	•	0.00 = top_start (inizio rep, posizione alta)
	•	0.25 = mid_ecc (metà fase eccentrica, discesa)
	•	0.50 = bottom (punto più basso / massima chiusura angolare)
	•	0.75 = mid_con (metà fase concentrica, risalita)
	•	1.00 = top_end (fine rep, posizione alta)
I valori di ciascuna feature ai checkpoint derivano da interpolazione della serie temporale della rep normalizzata in τ; se sono state aggregate più ripetizioni, il valore riportato è la mediana tra le rep.
	2.	timing → tempi in secondi e frazioni temporali:
	•	dur_ecc_s: durata fase eccentrica (discesa)
	•	dur_con_s: durata fase concentrica (salita)
	•	dur_rep_s: durata totale rep
	•	ecc_frac: quota eccentrica su totale (0–1)
	•	con_frac: quota concentrica su totale (0–1)
	3.	global → statistiche sulla serie completa della ripetizione (dopo lieve smoothing temporale):
	•	*_mean: media della feature lungo la rep
	•	*_rom: Range Of Motion = max − min della feature lungo la rep
Se reps_count>1 (benchmark), questi valori sono mediane sulle rep.
	•	Invarianza di vista: le feature angolari sono calcolate in 3D (world landmarks) e quindi sono indipendenti dall’inquadratura. Usiamo un body frame centrato sul bacino per posizioni/rapporti normalizzati.

Significato delle feature (unità e definizioni)

Tutte le angolazioni sono in gradi (°).
	•	knee_L_deg_3d, knee_R_deg_3d: angolo al ginocchio (triade: anca–ginocchio–caviglia). Valori più bassi indicano maggiore chiusura del ginocchio (maggiore profondità).
	•	hip_L_deg_3d, hip_R_deg_3d: angolo all’anca (triade: spalla–anca–ginocchio). Approssima l’angolo tronco-coscia.
	•	shoulder_L_deg_3d, shoulder_R_deg_3d: angolo alla spalla (triade: gomito–spalla–anca). Utile se le braccia contribuiscono alla postura.
	•	torso_incline_deg: inclinazione del tronco rispetto alla verticale del body frame (0° ≈ tronco verticale).

Feature posturali/globali:
	•	stance_width_norm: distanza tra le caviglie normalizzata alla distanza tra le anche (≈1.0 = larghezza-anche).
	•	pelvis_y_body_mean, pelvis_y_body_rom: quota verticale del bacino nel body frame e sua escursione. Spesso la media è ~0 perché l’origine è sul bacino.

Nota su aggregazioni: se reps_count>1 (benchmark), i valori di checkpoints, timing e global sono mediane tra le ripetizioni; se è una singola rep, sono i valori di quella specifica rep.

Dati di input

BENCHMARK / GT (rep_assessment):
<<BENCHMARK_JSON>>

CANDIDATO / ESECUZIONE DA VALUTARE (rep_assessment):
<<CANDIDATE_JSON>>

Compito
	1.	Confronta benchmark e candidato:
	•	Allinea per checkpoint (0.00, 0.25, 0.50, 0.75, 1.00) e confronta le stesse feature disponibili su entrambi.
	•	Confronta i tempi (dur_ecc_s, dur_con_s, dur_rep_s, ecc_frac, con_frac).
	•	Confronta le statistiche globali (*_mean, *_rom).
	•	Considera la simmetria L/R quando presente (es. knee_L vs knee_R allo stesso checkpoint).
	•	Se una feature manca in uno dei due, ignorala senza penalizzare.
	2.	Fornisci  una breve descrizione (2–4 frasi) di cosa è stato fatto bene e cosa va migliorato.
	3.	Assegna uno score complessivo da 0 a 1 sulla qualità dell’esecuzione dello squat del candidato, dove 1 = eccellente aderenza al benchmark. Includi una riga di giustificazione dello score.

Stile di risposta
	•	In italiano, chiaro e conciso.
	•	Nessuna tabella; testo compatto con elenchi puntati solo se aiutano la leggibilità.
	•	Non introdurre soglie/regole arbitrarie: deduci liberamente dai numeri forniti.

Formato di uscita (obbligatorio)
	•	Sintesi: (2–4 frasi: cosa è andato bene / cosa migliorare)
	•	Score (0–1): X.XX — breve motivazione
